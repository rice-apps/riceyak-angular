<div class="container post-container">
  <div class="card mb-4 post-card">
    <div class="card-body">
      <div class="row no-gutters">
        <div class="col-1 mx-auto" style="font-size: 20pt">
          <span class="fa fa-caret-up row center-block vote-caret vote-caret-up"
                [ngClass]="{'upvoted': (userVote === 1)}"
                (click)="voteOnPost(1)"></span>
          <span class="row center-block" style="font-size: 15pt;">{{post.score}}</span>
          <span class="fa fa-caret-down row center-block vote-caret vote-caret-down"
                [ngClass]="{'downvoted': (userVote === -1)}"
                (click)="voteOnPost(-1)"></span>
        </div>
        <div class="media col-11">
          <div class="media-body">
            <h5 class="mt-0 mb-1">{{post.title}}</h5>
            {{post.body}}
          </div>
          <img class="rounded" [src]="post.author.avatar_url" width="64" height="64" alt="Avatar">
        </div>
      </div>
    </div>

    <div class="card-footer">
      <button class="btn btn-primary" (click)="submitChanges(fake_textarea.innerText, body.value)">Submit Changes
      </button>
      <button class="btn btn-primary" (click)="deletePost()">Delete</button>
      <button class="btn btn-primary" (click)="editPost()">Cancel Edit</button>
      <small class="pull-right text-muted">{{post.date | timeAgo}}</small>
    </div>
  </div>


  <div class="card p-3 mb-4 post-card bg-light comment-card">
    <div class="card">
      <form class="mx-4 my-4">
        <div class="form-group">
        <input type="text" class="form-control form-control-sm" id="commentInput" placeholder="Write a comment..." #commentInput>
        </div>
        <button class="btn btn-sm btn-hover btn-primary pull-right"
                (click)="commentOnPost(commentInput.value); commentInput.value=''"
                (keyup.enter)="commentOnPost(commentInput.value); commentInput.value=''">
          Comment
        </button>
      </form>
    </div>
  </div>

  <div class="card p-3 post-card mb-4 bg-light comment-card">
    <small class="text-muted text-center" *ngIf="!post.comments.length">No comments yet</small>
    <div *ngFor="let comment of post.comments" class="card mb-2 p-3">
      <div class="row no-gutters">
        <div class="col-1 mx-auto" style="font-size: 15pt">
          <span class="fa fa-caret-up row center-block vote-caret vote-caret-up">
                <!--[ngClass]="{'upvoted': (userVote === 1)}"-->
                <!--(click)="voteOnPost(1)">-->
          </span>
          <span class="row center-block" style="font-size: 10pt;">{{comment.score}}</span>
          <span class="fa fa-caret-down row center-block vote-caret vote-caret-down">
                <!--[ngClass]="{'downvoted': (userVote === -1)}"-->
                <!--(click)="voteOnPost(-1)">-->
          </span>
        </div>
        <div class="media col-11">
          <div class="media-body">
            {{comment.body}}
          </div>
          <img class="rounded" [src]="comment.author.avatar_url" width="32" height="32" alt="Avatar">
        </div>
      </div>
    </div>
  </div>



</div>

